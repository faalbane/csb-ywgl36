{"version":3,"sources":["src/webcam.min.js"],"names":["e","t","a","Error","apply","arguments","name","stack","message","i","s","prototype","Webcam","version","protocol","location","match","loaded","live","userMedia","iOS","test","navigator","userAgent","MSStream","params","width","height","dest_width","dest_height","image_format","jpeg_quality","enable_flash","force_flash","flip_horiz","fps","upload_name","constraints","swfURL","flashNotDetectedText","noInterfaceFoundText","unfreeze_snap","iosPlaceholderText","user_callback","user_canvas","errors","FlashError","WebcamError","hooks","init","mediaDevices","getUserMedia","mozGetUserMedia","webkitGetUserMedia","Promise","call","URL","webkitURL","mozURL","msURL","parseInt","RegExp","$1","addEventListener","reset","exifOrientation","DataView","getUint8","console","log","byteLength","n","String","fromCharCode","r","getUint16","o","getUint32","l","h","c","d","f","m","p","fixOrientation","Image","document","createElement","getContext","transform","drawImage","src","toDataURL","attach","getElementById","querySelector","dispatch","container","innerHTML","appendChild","peg","offsetWidth","offsetHeight","undefined","setAttribute","style","overflow","webkitTransformOrigin","mozTransformOrigin","msTransformOrigin","oTransformOrigin","transformOrigin","webkitTransform","mozTransform","msTransform","oTransform","video","audio","mandatory","minWidth","minHeight","then","onloadedmetadata","stream","flip","srcObject","createObjectURL","catch","detectFlash","setTimeout","id","className","textAlign","display","verticalAlign","backgroundRepeat","backgroundSize","backgroundPosition","target","files","length","type","indexOf","ratio","Math","min","backgroundImage","FileReader","result","XMLHttpRequest","open","responseType","onload","status","readAsArrayBuffer","response","send","snap","focus","click","getSWFHTML","crop_width","crop_height","floor","u","scrollLeft","scrollTop","preview_active","unfreeze","unflip","getVideoTracks","stop","getMovie","_releaseCamera","set","on","replace","toLowerCase","push","off","splice","Array","slice","_typeof","toString","alert","setSWFLocation","plugins","description","mimeTypes","enabledPlugin","ActiveXObject","GetVariable","getElementsByTagName","getAttribute","localStorage","getItem","new_user","setItem","escape","_snap","freeze","preview_canvas","preview_context","position","left","top","insertBefore","removeChild","filter","msFilter","savePreview","translate","scale","iFunc","_iFunc","_x","removeEventListener","removeAttribute","value","configure","_configure","flashNotify","b64ToUint6","base64DecToArr","ceil","Uint8Array","charCodeAt","upload","lengthComputable","total","responseText","statusText","Blob","FormData","append","define","amd","module","exports","window"],"mappings":";;AA23BU,IAAA,EAAA,SAAA,EAAA,GAAA,OAAA,EAAA,mBAAA,QAAA,iBAAA,OAAA,SAAA,SAAA,GAAA,cAAA,GAAA,SAAA,GAAA,OAAA,GAAA,mBAAA,QAAA,EAAA,cAAA,QAAA,IAAA,OAAA,UAAA,gBAAA,IAAA,IA13BV,SAAWA,GACT,IAAIC,EACJ,SAASC,IACP,IAAIF,EAAIG,MAAMC,MAAM,KAAMC,WAC1BL,EAAEM,KAAO,KAAKA,KAAO,aACrB,KAAKC,MAAQP,EAAEO,MACf,KAAKC,QAAUR,EAAEQ,QAEnB,SAASC,IACP,IAAIT,EAAIG,MAAMC,MAAM,KAAMC,WAC1BL,EAAEM,KAAO,KAAKA,KAAO,cACrB,KAAKC,MAAQP,EAAEO,MACf,KAAKC,QAAUR,EAAEQ,QAEnB,IAAIE,EAAI,aACRA,EAAEC,UAAYR,MAAMQ,UACpBT,EAAES,UAAY,IAAID,EAClBD,EAAEE,UAAY,IAAID,EAClB,IAAIE,EAAS,CACXC,QAAS,SACTC,SAAUC,SAASD,SAASE,MAAM,UAAY,QAAU,OACxDC,QAAQ,EACRC,MAAM,EACNC,WAAW,EACXC,IAAK,mBAAmBC,KAAKC,UAAUC,aAAevB,EAAEwB,SACxDC,OAAQ,CACNC,MAAO,EACPC,OAAQ,EACRC,WAAY,EACZC,YAAa,EACbC,aAAc,OACdC,aAAc,GACdC,cAAc,EACdC,aAAa,EACbC,YAAY,EACZC,IAAK,GACLC,YAAa,SACbC,YAAa,KACbC,OAAQ,GACRC,qBACE,gIACFC,qBAAsB,uCACtBC,eAAe,EACfC,mBAAoB,6BACpBC,cAAe,KACfC,YAAa,MAEfC,OAAQ,CAAEC,WAAY5C,EAAG6C,YAAatC,GACtCuC,MAAO,GACPC,KAAM,WACJ,IAAIhD,EAAI,KACR,KAAKiD,aACH5B,UAAU4B,cAAgB5B,UAAU4B,aAAaC,aAC7C7B,UAAU4B,aACV5B,UAAU8B,iBAAmB9B,UAAU+B,mBACvC,CACEF,aAAc,SAAUnD,GACtB,OAAO,IAAIsD,QAAQ,SAAUrD,EAAGC,IAE5BoB,UAAU8B,iBAAmB9B,UAAU+B,oBACvCE,KAAKjC,UAAWtB,EAAGC,EAAGC,OAI9B,KACNF,EAAEwD,IAAMxD,EAAEwD,KAAOxD,EAAEyD,WAAazD,EAAE0D,QAAU1D,EAAE2D,MAC9C,KAAKxC,UAAY,KAAKA,aAAe,KAAK+B,gBAAkBlD,EAAEwD,IAC1DlC,UAAUC,UAAUP,MAAM,oBACxB4C,SAASC,OAAOC,GAAI,IAAM,KAAI,KAAK3C,UAAY,MAEjD,KAAKA,WACPnB,EAAE+D,iBAAiB,eAAgB,SAAU/D,GAC3CC,EAAE+D,WAIRC,gBAAiB,SAAUjE,GACzB,IAAIC,EAAI,IAAIiE,SAASlE,GACrB,GAAqB,KAAjBC,EAAEkE,SAAS,IAA8B,KAAjBlE,EAAEkE,SAAS,GAErC,OADAC,QAAQC,IAAI,yBACL,EAIT,IAFA,IAAInE,EAAI,EAEDA,EAAIF,EAAEsE,YAAY,CACvB,GAAqB,KAAjBrE,EAAEkE,SAASjE,GAIb,OAHAkE,QAAQC,IACN,gCAAkCnE,EAAI,YAAcD,EAAEkE,SAASjE,IAE1D,EAGT,GAAS,KADLD,EAAEkE,SAASjE,EAAI,GACL,CACZA,GAAK,EACL,IAAIQ,EAAI,GACR,IAAK6D,EAAI,EAAGA,EAAI,EAAGA,IACjB7D,GAAK8D,OAAOC,aAAaxE,EAAEkE,SAASjE,EAAIqE,IAE1C,GAAS,QAAL7D,EAEF,OADA0D,QAAQC,IAAI,6BACL,EAETnE,GAAK,EACL,IAAIwE,EAAI,KACR,GAAsB,OAAlBzE,EAAE0E,UAAUzE,GACdwE,GAAI,MACC,CAAA,GAAsB,OAAlBzE,EAAE0E,UAAUzE,GAIrB,OADAkE,QAAQC,IAAI,8CACL,EAHPK,GAAI,EAKN,GAA8B,IAA1BzE,EAAE0E,UAAUzE,EAAI,GAAIwE,GAEtB,OADAN,QAAQC,IAAI,oCACL,EAET,IAAIO,EAAI3E,EAAE4E,UAAU3E,EAAI,GAAIwE,GAC5B,GAAIE,EAAI,EAKN,OAJAR,QAAQC,IACN,kDACApE,EAAE4E,UAAU3E,EAAI,GAAIwE,IAEf,EAIT,IAFA,IAAII,EAAI5E,EAAI0E,EACRG,EAAI9E,EAAE0E,UAAUG,GAAIJ,GACfM,EAAI,EAAGA,EAAID,EAAGC,IAAK,CAC1B,IAAIC,EAAIH,EAAQ,GAAJE,EAAS,EACrB,GAA0B,KAAtB/E,EAAE0E,UAAUM,GAAIP,GAAW,CAC7B,IAAIQ,EAAIjF,EAAE0E,UAAUM,EAAI,GAAIP,GACxBS,EAAIlF,EAAE4E,UAAUI,EAAI,GAAIP,GAC5B,GAAS,GAALQ,GAAe,GAALC,EAQZ,OAPAf,QAAQC,IACN,wCACEa,EACA,eACAC,EACA,KAEG,EAET,IAAIC,EAAInF,EAAE0E,UAAUM,EAAI,GAAIP,GAC5B,OAAIU,EAAI,GAAKA,EAAI,GACfhB,QAAQC,IAAI,mCAAqCe,EAAI,KAC9C,GAEFA,SAIXlF,GAAK,EAAID,EAAE0E,UAAUzE,EAAI,GAG7B,OAAO,GAETmF,eAAgB,SAAUrF,EAAGC,EAAGC,GAC9B,IAAIO,EAAI,IAAI6E,MACZ7E,EAAEsD,iBACA,OACA,SAAU/D,GACR,IAAIU,EAAI6E,SAASC,cAAc,UAC3Bd,EAAIhE,EAAE+E,WAAW,MAQrB,OAPIxF,EAAI,GACNS,EAAEgB,MAAQjB,EAAEiB,MACZhB,EAAEiB,OAASlB,EAAEkB,SAEbjB,EAAEgB,MAAQjB,EAAEkB,OACZjB,EAAEiB,OAASlB,EAAEiB,OAEPzB,GACN,KAAK,EACHyE,EAAEgB,WAAW,EAAG,EAAG,EAAG,EAAGjF,EAAEiB,MAAO,GAClC,MACF,KAAK,EACHgD,EAAEgB,WAAW,EAAG,EAAG,GAAI,EAAGjF,EAAEiB,MAAOjB,EAAEkB,QACrC,MACF,KAAK,EACH+C,EAAEgB,UAAU,EAAG,EAAG,GAAI,EAAG,EAAGjF,EAAEkB,QAC9B,MACF,KAAK,EACH+C,EAAEgB,UAAU,EAAG,EAAG,EAAG,EAAG,EAAG,GAC3B,MACF,KAAK,EACHhB,EAAEgB,UAAU,EAAG,GAAI,EAAG,EAAGjF,EAAEkB,OAAQ,GACnC,MACF,KAAK,EACH+C,EAAEgB,UAAU,GAAI,GAAI,EAAG,EAAGjF,EAAEkB,OAAQlB,EAAEiB,OACtC,MACF,KAAK,EACHgD,EAAEgB,UAAU,GAAI,EAAG,EAAG,EAAG,EAAGjF,EAAEiB,OAGlCgD,EAAEiB,UAAUlF,EAAG,EAAG,GAClBP,EAAE0F,IAAMlF,EAAEmF,cAEZ,GAEFpF,EAAEmF,IAAM5F,GAEV8F,OAAQ,SAAU5F,GAIhB,GAHgB,iBAALA,IACTA,EAAIqF,SAASQ,eAAe7F,IAAMqF,SAASS,cAAc9F,KAEtDA,EACH,OAAO,KAAK+F,SACV,QACA,IAAIxF,EAAE,+CAGV,KAAKyF,UAAYhG,EACjBA,EAAEiG,UAAY,GACd,IAAIzF,EAAI6E,SAASC,cAAc,OAK/B,GAJAtF,EAAEkG,YAAY1F,GACd,KAAK2F,IAAM3F,EACN,KAAKe,OAAOC,QAAO,KAAKD,OAAOC,MAAQxB,EAAEoG,aACzC,KAAK7E,OAAOE,SAAQ,KAAKF,OAAOE,OAASzB,EAAEqG,eAC3C,KAAK9E,OAAOC,QAAU,KAAKD,OAAOE,OACrC,OAAO,KAAKsE,SACV,QACA,IAAIxF,EACF,iGAID,KAAKgB,OAAOG,aAAY,KAAKH,OAAOG,WAAa,KAAKH,OAAOC,OAC7D,KAAKD,OAAOI,cACf,KAAKJ,OAAOI,YAAc,KAAKJ,OAAOE,QACxC,KAAKR,eAAkBqF,IAANvG,EAAkB,KAAKkB,UAAYlB,EAChD,KAAKwB,OAAOQ,cACdhC,EAAI,KAAKkB,UACT,KAAKA,UAAY,MAEY,iBAApB,KAAKM,OAAOU,MAAkB,KAAKV,OAAOU,IAAM,IAC3D,IAAIuC,EAAI,KAAKjD,OAAOC,MAAQ,KAAKD,OAAOG,WACpCgD,EAAI,KAAKnD,OAAOE,OAAS,KAAKF,OAAOI,YACzC,GAAI,KAAKV,UAAW,CAClB,IAAIoD,EAAIgB,SAASC,cAAc,SAC/BjB,EAAEkC,aAAa,WAAY,YAC3BlC,EAAEkC,aAAa,cAAe,eAC9BlC,EAAEmC,MAAMhF,MAAa,KAAKD,OAAOG,WAAa,KAC9C2C,EAAEmC,MAAM/E,OAAc,KAAKF,OAAOI,YAAc,KACvC,GAAL6C,GAAe,GAALE,IACZ1E,EAAEwG,MAAMC,SAAW,SACnBpC,EAAEmC,MAAME,sBAAwB,UAChCrC,EAAEmC,MAAMG,mBAAqB,UAC7BtC,EAAEmC,MAAMI,kBAAoB,UAC5BvC,EAAEmC,MAAMK,iBAAmB,UAC3BxC,EAAEmC,MAAMM,gBAAkB,UAC1BzC,EAAEmC,MAAMO,gBAAkB,UAAYvC,EAAI,YAAcE,EAAI,IAC5DL,EAAEmC,MAAMQ,aAAe,UAAYxC,EAAI,YAAcE,EAAI,IACzDL,EAAEmC,MAAMS,YAAc,UAAYzC,EAAI,YAAcE,EAAI,IACxDL,EAAEmC,MAAMU,WAAa,UAAY1C,EAAI,YAAcE,EAAI,IACvDL,EAAEmC,MAAMhB,UAAY,UAAYhB,EAAI,YAAcE,EAAI,KAExD1E,EAAEkG,YAAY7B,GACd,KAAK8C,MAAQ9C,EACb,IAAIO,EAAI,KACR,KAAK5B,aACFC,aAAa,CACZmE,OAAO,EACPD,MAAO,KAAK5F,OAAOY,aAAe,CAChCkF,UAAW,CACTC,SAAU,KAAK/F,OAAOG,WACtB6F,UAAW,KAAKhG,OAAOI,gBAI5B6F,KAAK,SAAUzH,GACdsE,EAAEoD,iBAAmB,SAAU3H,GAC7B8E,EAAE8C,OAAS3H,EACX6E,EAAE7D,QAAS,EACX6D,EAAE5D,MAAO,EACT4D,EAAEmB,SAAS,QACXnB,EAAEmB,SAAS,QACXnB,EAAE+C,QAEA,cAAetD,EACjBA,EAAEuD,UAAY7H,EAEdsE,EAAEqB,IAAM5F,EAAEwD,IAAIuE,gBAAgB9H,KAGjC+H,MAAM,SAAUhI,GACX8E,EAAErD,OAAOO,cAAgB8C,EAAEmD,cAC7BC,WAAW,WACTpD,EAAErD,OAAOQ,YAAc,EACvB6C,EAAEgB,OAAO5F,IACR,GAEH4E,EAAEmB,SAAS,QAASjG,UAGrB,GAAI,KAAKoB,IAAK,EACf2D,EAAIQ,SAASC,cAAc,QAC7B2C,GAAK,KAAKjC,UAAUiC,GAAK,WAC3BpD,EAAEqD,UAAY,2BACdrD,EAAE2B,MAAMhF,MAAa,KAAKD,OAAOC,MAAQ,KACzCqD,EAAE2B,MAAM/E,OAAc,KAAKF,OAAOE,OAAS,KAC3CoD,EAAE2B,MAAM2B,UAAY,SACpBtD,EAAE2B,MAAM4B,QAAU,aAClBvD,EAAE2B,MAAM6B,cAAgB,SACxBxD,EAAE2B,MAAM8B,iBAAmB,YAC3BzD,EAAE2B,MAAM+B,eAAiB,UACzB1D,EAAE2B,MAAMgC,mBAAqB,SAC7B,IAAI1D,EAAIO,SAASC,cAAc,QAC/BR,EAAEoD,UAAY,oBACdpD,EAAEmB,UAAY,KAAK1E,OAAOiB,mBAC1BqC,EAAEqB,YAAYpB,GACd,IAAIC,EAAIM,SAASC,cAAc,OAC/BP,EAAEkD,GAAK,KAAKjC,UAAUiC,GAAK,WAC3BlD,EAAEyB,MAAMhF,MAAa,KAAKD,OAAOG,WAAa,KAC9CqD,EAAEyB,MAAM/E,OAAc,KAAKF,OAAOI,YAAc,KAChDoD,EAAEyB,MAAM4B,QAAU,OAClBvD,EAAEqB,YAAYnB,GACd,IAAIC,EAAIK,SAASC,cAAc,SAC/BN,EAAEiD,GAAK,KAAKjC,UAAUiC,GAAK,aAC3BjD,EAAEuB,aAAa,OAAQ,QACvBvB,EAAEuB,aAAa,SAAU,WACzBvB,EAAEuB,aAAa,UAAW,UACtB3B,EAAI,KAAR,IACIK,EAAI,KAAK1D,OACbyD,EAAEnB,iBACA,SACA,SAAU/D,GACR,GACEA,EAAE2I,OAAOC,MAAMC,OAAS,GACoB,GAA5C7I,EAAE2I,OAAOC,MAAM,GAAGE,KAAKC,QAAQ,UAC/B,CACA,IAAI9I,EAAIuD,IAAIuE,gBAAgB/H,EAAE2I,OAAOC,MAAM,IACvC1I,EAAI,IAAIoF,MACZpF,EAAE6D,iBACA,OACA,SAAU/D,GACR,IAAIC,EAAIsF,SAASC,cAAc,UAC/BvF,EAAEyB,MAAQyD,EAAEvD,WACZ3B,EAAE0B,OAASwD,EAAEtD,YACb,IAAIpB,EAAIR,EAAEwF,WAAW,MACrBuD,MAAQC,KAAKC,IACXhJ,EAAEwB,MAAQyD,EAAEvD,WACZ1B,EAAEyB,OAASwD,EAAEtD,aAEf,IAAInB,EAAIyE,EAAEvD,WAAaoH,MACnBtE,EAAIS,EAAEtD,YAAcmH,MACpBpE,GAAK1E,EAAEwB,MAAQhB,GAAK,EACpB6D,GAAKrE,EAAEyB,OAAS+C,GAAK,EACzBjE,EAAEkF,UAAUzF,EAAG0E,EAAGL,EAAG7D,EAAGgE,EAAG,EAAG,EAAGS,EAAEvD,WAAYuD,EAAEtD,aACjD,IAAIiD,EAAI7E,EAAE4F,YACVZ,EAAEW,IAAMd,EACRC,EAAE2B,MAAMyC,gBAAkB,QAAUrE,EAAI,OAE1C,GAEF,IAAIrE,EAAI,IAAI2I,WACZ3I,EAAEsD,iBACA,OACA,SAAU/D,GACR,IAAIS,EAAIqE,EAAEb,gBAAgBjE,EAAE2I,OAAOU,QAC/B5I,EAAI,EACNqE,EAAEO,eAAepF,EAAGQ,EAAGP,GAEvBA,EAAE0F,IAAM3F,IAGZ,GAEF,IAAIS,EAAI,IAAI4I,eACZ5I,EAAE6I,KAAK,MAAOtJ,GAAG,GACjBS,EAAE8I,aAAe,OACjB9I,EAAE+I,OAAS,SAAUzJ,GACA,KAAf,KAAK0J,QAAiC,IAAhB,KAAKA,QAC7BjJ,EAAEkJ,kBAAkB,KAAKC,WAG7BlJ,EAAEmJ,UAGN,GAEF3E,EAAEwB,MAAM4B,QAAU,OAClBpI,EAAEkG,YAAYlB,GACdH,EAAEhB,iBACA,QACA,SAAU/D,GACJmF,EAAExC,cACJmC,EAAEgF,KAAK3E,EAAExC,cAAewC,EAAEvC,cAE1BsC,EAAEwB,MAAM4B,QAAU,QAClBpD,EAAE6E,QACF7E,EAAE8E,QACF9E,EAAEwB,MAAM4B,QAAU,UAGtB,GAEFpI,EAAEkG,YAAYrB,GACd,KAAK9D,QAAS,EACd,KAAKC,MAAO,OACP,GAAI,KAAKO,OAAOO,cAAgB,KAAKiG,cAAe,CAEzD,IAAIlD,EADJ/E,EAAEY,OAASA,GACPmE,EAAIQ,SAASC,cAAc,QAC7BW,UAAY,KAAK8D,aACnB/J,EAAEkG,YAAYrB,QAEd,KAAKkB,SAAS,QAAS,IAAIxF,EAAE,KAAKgB,OAAOe,uBAE3C,GAAI,KAAKf,OAAOyI,YAAc,KAAKzI,OAAO0I,YAAa,CACrD,IAAI/E,EAAI6D,KAAKmB,MAAM,KAAK3I,OAAOyI,WAAaxF,GACxC2F,EAAIpB,KAAKmB,MAAM,KAAK3I,OAAO0I,YAAcvF,GAC7C1E,EAAEwG,MAAMhF,MAAa0D,EAAI,KACzBlF,EAAEwG,MAAM/E,OAAc0I,EAAI,KAC1BnK,EAAEwG,MAAMC,SAAW,SACnBzG,EAAEoK,WAAarB,KAAKmB,MAAM,KAAK3I,OAAOC,MAAQ,EAAI0D,EAAI,GACtDlF,EAAEqK,UAAYtB,KAAKmB,MAAM,KAAK3I,OAAOE,OAAS,EAAI0I,EAAI,QAEtDnK,EAAEwG,MAAMhF,MAAa,KAAKD,OAAOC,MAAQ,KACzCxB,EAAEwG,MAAM/E,OAAc,KAAKF,OAAOE,OAAS,MAG/CqC,MAAO,WAGL,GAFI,KAAKwG,gBAAgB,KAAKC,WAC9B,KAAKC,SACD,KAAKvJ,UAAW,CAClB,GAAI,KAAKyG,OACP,GAAI,KAAKA,OAAO+C,eAAgB,CAC9B,IAAI3K,EAAI,KAAK4H,OAAO+C,iBAChB3K,GAAKA,EAAE,IAAMA,EAAE,GAAG4K,MAAM5K,EAAE,GAAG4K,YACxB,KAAKhD,OAAOgD,MACrB,KAAKhD,OAAOgD,cAGT,KAAKhD,cACL,KAAKP,MAEd,IAAuB,IAAnB,KAAKlG,WAAsB,KAAKF,SAAW,KAAKG,IAAK,CACvD,IAAInB,EAAI,KAAK4K,WACT5K,GAAKA,EAAE6K,gBAAgB7K,EAAE6K,iBAE3B,KAAK5E,YACP,KAAKA,UAAUC,UAAY,UACpB,KAAKD,WAEd,KAAKjF,QAAS,EACd,KAAKC,MAAO,GAEd6J,IAAK,WACH,GAAwB,GAApB1K,UAAUwI,OACZ,IAAK,IAAI7I,KAAKK,UAAU,GACtB,KAAKoB,OAAOzB,GAAKK,UAAU,GAAGL,QAGhC,KAAKyB,OAAOpB,UAAU,IAAMA,UAAU,IAG1C2K,GAAI,SAAUhL,EAAGC,GACfD,EAAIA,EAAEiL,QAAQ,OAAQ,IAAIC,cACrB,KAAKlI,MAAMhD,KAAI,KAAKgD,MAAMhD,GAAK,IACpC,KAAKgD,MAAMhD,GAAGmL,KAAKlL,IAErBmL,IAAK,SAAUpL,EAAGC,GAEhB,GADAD,EAAIA,EAAEiL,QAAQ,OAAQ,IAAIC,cACtB,KAAKlI,MAAMhD,GACb,GAAIC,EAAG,CACL,IAAIC,EAAI,KAAK8C,MAAMhD,GAAG+I,QAAQ9I,GAC1BC,GAAK,GAAG,KAAK8C,MAAMhD,GAAGqL,OAAOnL,EAAG,QAEpC,KAAK8C,MAAMhD,GAAK,IAItBiG,SAAU,WACR,IAeMnB,EAfF7E,EAAII,UAAU,GAAG4K,QAAQ,OAAQ,IAAIC,cACrCxK,EAAI4K,MAAM3K,UAAU4K,MAAMhI,KAAKlD,UAAW,GAC9C,GAAI,KAAK2C,MAAM/C,IAAM,KAAK+C,MAAM/C,GAAG4I,OAAQ,CACzC,IAAK,IAAInE,EAAI,EAAGE,EAAI,KAAK5B,MAAM/C,GAAG4I,OAAQnE,EAAIE,EAAGF,IAAK,CACpD,IAAIH,EAAI,KAAKvB,MAAM/C,GAAGyE,GACN,mBAALH,EACTA,EAAEnE,MAAM,KAAMM,GACO,UAAZ8K,EAAOjH,IAA6B,GAAZA,EAAEsE,OACnCtE,EAAE,GAAGA,EAAE,IAAInE,MAAMmE,EAAE,GAAI7D,GACdV,EAAEuE,IACXvE,EAAEuE,GAAGnE,MAAMJ,EAAGU,GAGlB,OAAO,EAgBT,MAfgB,SAALT,IAGP6E,EADEpE,EAAE,aAAcR,GAAKQ,EAAE,aAAcD,EACnCC,EAAE,GAAGF,QAGP,4BACAE,EAAE,GAAGJ,KACL,KACAI,EAAE,GAAGF,QACL,IACAE,EAAE,GAAG+K,WAETC,MAAM,oBAAsB5G,KAEvB,GAET6G,eAAgB,SAAU3L,GACxB,KAAK+K,IAAI,SAAU/K,IAErBiI,YAAa,WACX,IAAIhI,EAAI,kBAENQ,EAAI,gCACJC,EAAIV,EACJ0E,EAAIpD,UACJsD,GAAI,EACN,QACuB,IAAdF,EAAEkH,SACe,WAAxBJ,EAAO9G,EAAEkH,QAAQ3L,IAETyE,EAAEkH,QAAQ3L,GAAG4L,kBAGI,IAAhBnH,EAAEoH,WACTpH,EAAEoH,UAAUrL,IACZiE,EAAEoH,UAAUrL,GAAGsL,gBAEfnH,GAAI,QAED,QAA+B,IAApBlE,EAAEsL,cAClB,IACE,IAAIlH,EAAI,IAAIkH,cApBV,iCAqBF,GAAIlH,EACMA,EAAEmH,YAAY,cACfrH,GAAI,GAEb,MAAO5E,IAEX,OAAO4E,GAETqF,WAAY,WACV,IAAIhK,EAAI,GACNQ,EAAI,KAAKgB,OAAOa,OAClB,GAAIvB,SAASD,SAASE,MAAM,QAO1B,OANA,KAAKiF,SACH,QACA,IAAI/F,EACF,wEAGG,kIAET,IAAK,KAAK+H,cAOR,OANA,KAAKhC,SACH,QACA,IAAI/F,EACF,gGAIF,yBAA2B,KAAKuB,OAAOc,qBAAuB,QAGlE,IAAK9B,EAAG,CAGN,IAFA,IAAIC,EAAI,GACJgE,EAAIa,SAAS2G,qBAAqB,UAC7BtH,EAAI,EAAGL,EAAIG,EAAEmE,OAAQjE,EAAIL,EAAGK,IAAK,CACxC,IAAIE,EAAIJ,EAAEE,GAAGuH,aAAa,OACtBrH,GAAKA,EAAE9D,MAAM,0BACfN,EAAIoE,EAAEmG,QAAQ,0BAA2B,IACzCrG,EAAIL,GAGD9D,EAAHC,EAAOA,EAAI,cACN,aAEPV,EAAEoM,eAAiBA,aAAaC,QAAQ,aAC1C,KAAK5K,OAAO6K,SAAW,EACvBF,aAAaG,QAAQ,UAAW,IAElC,IAAIxH,EAAI,GACR,IAAK,IAAIC,KAAK,KAAKvD,OACbsD,IAAGA,GAAK,KACZA,GAAKC,EAAI,IAAMwH,OAAO,KAAK/K,OAAOuD,IAsBpC,OApBA/E,GACE,+GACA,KAAKa,SACL,2FACA,KAAKW,OAAOC,MACZ,aACA,KAAKD,OAAOE,OACZ,yMACAlB,EACA,yLACAsE,EACA,0CACAtE,EACA,sFACA,KAAKgB,OAAOC,MACZ,aACA,KAAKD,OAAOE,OACZ,2MACAoD,EACA,uBAGJ8F,SAAU,WACR,IAAK,KAAK5J,OACR,OAAO,KAAKgF,SAAS,QAAS,IAAI/F,EAAE,kCACtC,IAAIF,EAAIuF,SAASQ,eAAe,oBAGhC,OAFK/F,GAAMA,EAAEyM,QAAOzM,EAAIuF,SAASQ,eAAe,uBAC3C/F,GAAG,KAAKiG,SAAS,QAAS,IAAI/F,EAAE,qCAC9BF,GAET0M,OAAQ,WACN,IAAI1M,EAAI,KACJC,EAAI,KAAKwB,OACT,KAAK+I,gBAAgB,KAAKC,WAC9B,IAAIvK,EAAI,KAAKuB,OAAOC,MAAQ,KAAKD,OAAOG,WACpCnB,EAAI,KAAKgB,OAAOE,OAAS,KAAKF,OAAOI,YACzC,KAAK6I,SACL,IAAIhK,EAAIT,EAAEiK,YAAcjK,EAAE2B,WACtB8C,EAAIzE,EAAEkK,aAAelK,EAAE4B,YACvB+C,EAAIW,SAASC,cAAc,UAC/BZ,EAAElD,MAAQhB,EACVkE,EAAEjD,OAAS+C,EACX,IAAIH,EAAIK,EAAEa,WAAW,MACrB,KAAKkH,eAAiB/H,EACtB,KAAKgI,gBAAkBrI,EACd,GAALrE,GAAe,GAALO,IACZmE,EAAE8B,MAAME,sBAAwB,UAChChC,EAAE8B,MAAMG,mBAAqB,UAC7BjC,EAAE8B,MAAMI,kBAAoB,UAC5BlC,EAAE8B,MAAMK,iBAAmB,UAC3BnC,EAAE8B,MAAMM,gBAAkB,UAC1BpC,EAAE8B,MAAMO,gBAAkB,UAAY/G,EAAI,YAAcO,EAAI,IAC5DmE,EAAE8B,MAAMQ,aAAe,UAAYhH,EAAI,YAAcO,EAAI,IACzDmE,EAAE8B,MAAMS,YAAc,UAAYjH,EAAI,YAAcO,EAAI,IACxDmE,EAAE8B,MAAMU,WAAa,UAAYlH,EAAI,YAAcO,EAAI,IACvDmE,EAAE8B,MAAMhB,UAAY,UAAYxF,EAAI,YAAcO,EAAI,KAExD,KAAKqJ,KAAK,WACRlF,EAAE8B,MAAMmG,SAAW,WACnBjI,EAAE8B,MAAMoG,KAAY9M,EAAEkG,UAAUoE,WAAa,KAC7C1F,EAAE8B,MAAMqG,IAAW/M,EAAEkG,UAAUqE,UAAY,KAC3CvK,EAAEkG,UAAU8G,aAAapI,EAAG5E,EAAEqG,KAC9BrG,EAAEkG,UAAUQ,MAAMC,SAAW,SAC7B3G,EAAEwK,gBAAiB,GAClB5F,IAEL6F,SAAU,WACJ,KAAKD,iBACP,KAAKtE,UAAU+G,YAAY,KAAKN,uBACzB,KAAKC,uBACL,KAAKD,eACZ,KAAKnC,gBAAiB,EACtB,KAAK3C,SAGTA,KAAM,WACJ,GAAI,KAAKpG,OAAOS,WAAY,CAC1B,IAAIlC,EAAI,KAAKkG,UAAUQ,MACvB1G,EAAEiH,gBAAkB,aACpBjH,EAAEkH,aAAe,aACjBlH,EAAEmH,YAAc,aAChBnH,EAAEoH,WAAa,aACfpH,EAAE0F,UAAY,aACd1F,EAAEkN,OAAS,QACXlN,EAAEmN,SAAW,UAGjBzC,OAAQ,WACN,GAAI,KAAKjJ,OAAOS,WAAY,CAC1B,IAAIlC,EAAI,KAAKkG,UAAUQ,MACvB1G,EAAEiH,gBAAkB,YACpBjH,EAAEkH,aAAe,YACjBlH,EAAEmH,YAAc,YAChBnH,EAAEoH,WAAa,YACfpH,EAAE0F,UAAY,YACd1F,EAAEkN,OAAS,GACXlN,EAAEmN,SAAW,KAGjBC,YAAa,SAAUpN,EAAGC,GACxB,IAAIC,EAAI,KAAKuB,OACThB,EAAI,KAAKkM,eACTjM,EAAI,KAAKkM,gBACT3M,GACMA,EAAEwF,WAAW,MACnBE,UAAUlF,EAAG,EAAG,GAEpBT,EACEC,EAAI,KAAOQ,EAAEoF,UAAU,SAAW3F,EAAE4B,aAAc5B,EAAE6B,aAAe,KACnEtB,EACAC,GAEE,KAAKe,OAAOgB,eAAe,KAAKgI,YAEtCX,KAAM,SAAU9J,EAAGC,GACZD,IAAGA,EAAI,KAAKyB,OAAOkB,eACnB1C,IAAGA,EAAI,KAAKwB,OAAOmB,aACxB,IACIlC,EAAI,KAAKe,OACb,IAAK,KAAKR,OACR,OAAO,KAAKgF,SAAS,QAAS,IAAIxF,EAAE,6BACtC,IAAKT,EACH,OAAO,KAAKiG,SACV,QACA,IAAIxF,EAAE,2DAEV,GAAI,KAAK+J,eAEP,OADA,KAAK4C,YAAYpN,EAAGC,GACb,KAET,IAAIyE,EAAIa,SAASC,cAAc,UAC/Bd,EAAEhD,MAAQ,KAAKD,OAAOG,WACtB8C,EAAE/C,OAAS,KAAKF,OAAOI,YACvB,IAAI+C,EAAIF,EAAEe,WAAW,MACjB,KAAKhE,OAAOS,aACd0C,EAAEyI,UAAU3M,EAAEkB,WAAY,GAC1BgD,EAAE0I,OAAO,EAAG,IAEd,IAAI/I,EAAI,WAON,GAAI7D,EAAEwJ,YAAcxJ,EAAEyJ,YAAa,CACjC,IAAIjK,EAAIqF,SAASC,cAAc,UAC/BtF,EAAEwB,MAAQhB,EAAEwJ,WACZhK,EAAEyB,OAASjB,EAAEyJ,YACb,IAAI1J,EAAIP,EAAEuF,WAAW,MACrBhF,EAAEkF,UACAjB,EACAuE,KAAKmB,MAAM1J,EAAEkB,WAAa,EAAIlB,EAAEwJ,WAAa,GAC7CjB,KAAKmB,MAAM1J,EAAEmB,YAAc,EAAInB,EAAEyJ,YAAc,GAC/CzJ,EAAEwJ,WACFxJ,EAAEyJ,YACF,EACA,EACAzJ,EAAEwJ,WACFxJ,EAAEyJ,aAEJvF,EAAInE,EACJiE,EAAIxE,EAEN,GAAID,EAAG,CACL,IAAIsE,EAAItE,EAAEwF,WAAW,MACrBlB,EAAEoB,UAAUjB,EAAG,EAAG,GAEpB1E,EACEC,EACI,KACAyE,EAAEmB,UAAU,SAAWnF,EAAEoB,aAAcpB,EAAEqB,aAAe,KAC5D2C,EACAE,IAGJ,GAAI,KAAKzD,UACPyD,EAAEe,UACA,KAAK0B,MACL,EACA,EACA,KAAK5F,OAAOG,WACZ,KAAKH,OAAOI,aAEd0C,SACK,GAAI,KAAKnD,IAAK,CACnB,IAAI0D,EAAIS,SAASQ,eAAe,KAAKG,UAAUiC,GAAK,YAChDpD,EAAIQ,SAASQ,eAAe,KAAKG,UAAUiC,GAAK,YAChDnD,EAAIO,SAASQ,eAAe,KAAKG,UAAUiC,GAAK,cACpDoF,MAAKC,SAAAA,GAAA,SAAAD,EAAAE,GAAA,OAAAD,EAAApN,MAAAC,KAAAA,WAAA,OAAAkN,EAAA9B,SAAA,WAAA,OAAA+B,EAAA/B,YAAA8B,EAAAC,CAAG,SAAUxN,GAChBuE,EAAEhB,KAAKwB,GACPA,EAAE2I,oBAAoB,OAAQH,OAC9BzI,EAAE4B,MAAMyC,gBAAkB,OAC1BpE,EAAE4I,gBAAgB,OAClB3I,EAAE4I,MAAQ,OAEP5I,EAAE4I,MAOLL,MAAM,OANNxI,EAAEhB,iBAAiB,OAAQwJ,OAC3BvI,EAAE0B,MAAM4B,QAAU,QAClBtD,EAAE+E,QACF/E,EAAEgF,QACFhF,EAAE0B,MAAM4B,QAAU,YAIf,CACL,IAAIrD,EAAI,KAAK4F,WAAW4B,SACpB1H,EAAI,IAAIO,OACVmE,OAASlF,EACXQ,EAAEa,IAAM,cAAgB,KAAKnE,OAAOK,aAAe,WAAamD,EAElE,OAAO,MAET4I,UAAW,SAAU7N,GACdA,IAAGA,EAAI,UACZ,KAAK6K,WAAWiD,WAAW9N,IAE7B+N,YAAa,SAAU/N,EAAGC,GACxB,OAAQD,GACN,IAAK,oBACH,KAAKiB,QAAS,EACd,KAAKgF,SAAS,QACd,MACF,IAAK,aACH,KAAK/E,MAAO,EACZ,KAAK+E,SAAS,QACd,MACF,IAAK,QACH,KAAKA,SAAS,QAAS,IAAI/F,EAAED,MAMnC+N,WAAY,SAAUhO,GACpB,OAAOA,EAAI,IAAMA,EAAI,GACjBA,EAAI,GACJA,EAAI,IAAMA,EAAI,IACdA,EAAI,GACJA,EAAI,IAAMA,EAAI,GACdA,EAAI,EACE,KAANA,EACA,GACM,KAANA,EACA,GACA,GAENiO,eAAgB,SAAUjO,EAAGC,GAK3B,IAJA,IAIS2E,EAAGL,EAJRrE,EAAIF,EAAEiL,QAAQ,oBAAqB,IACrCxK,EAAIP,EAAE2I,OACNnI,EAAIT,EAAIgJ,KAAKiF,MAAW,EAAJzN,EAAQ,GAAM,GAAKR,GAAKA,EAAS,EAAJQ,EAAQ,GAAM,EAC/DiE,EAAI,IAAIyJ,WAAWzN,GACNoE,EAAI,EAAGC,EAAI,EAAGC,EAAI,EAAGA,EAAIvE,EAAGuE,IAGzC,GAFAT,EAAQ,EAAJS,EACJF,GAAK,KAAKkJ,WAAW9N,EAAEkO,WAAWpJ,KAAQ,GAAK,EAAIT,EACzC,IAANA,GAAW9D,EAAIuE,GAAM,EAAG,CAC1B,IAAKJ,EAAI,EAAGA,EAAI,GAAKG,EAAIrE,EAAGkE,IAAKG,IAC/BL,EAAEK,GAAMD,KAAQ,KAAOF,EAAK,IAAO,IAErCE,EAAI,EAGR,OAAOJ,GAET2J,OAAQ,SAAUrO,EAAGC,EAAGC,GACtB,IAAIO,EAAI,KAAKgB,OAAOW,aAAe,SAC/B1B,EAAI,GACR,IAAIV,EAAEgB,MAAM,uBACP,KAAM,yCADyBN,EAAImD,OAAOC,GAE/C,IAAIY,EAAI1E,EAAEiL,QAAQ,8BAA+B,IAC7CrG,EAAI,IAAI0E,eACZ1E,EAAE2E,KAAK,OAAQtJ,GAAG,GACd2E,EAAEyJ,QAAUzJ,EAAEyJ,OAAOtK,kBACvBa,EAAEyJ,OAAOtK,iBACP,WACA,SAAU/D,GACR,GAAIA,EAAEsO,iBAAkB,CACtB,IAAIrO,EAAID,EAAEiB,OAASjB,EAAEuO,MACrB3N,EAAOqF,SAAS,iBAAkBhG,EAAGD,MAGzC,GAGJ,IAAIuE,EAAI,KACRK,EAAE6E,OAAS,WACLvJ,GAAGA,EAAEE,MAAMmE,EAAG,CAACK,EAAE8E,OAAQ9E,EAAE4J,aAAc5J,EAAE6J,aAC/C7N,EAAOqF,SACL,iBACArB,EAAE8E,OACF9E,EAAE4J,aACF5J,EAAE6J,aAGN,IAAI3J,EAAI,IAAI4J,KAAK,CAAC,KAAKT,eAAevJ,IAAK,CAAEoE,KAAM,SAAWpI,IAC1DqE,EAAI,IAAI4J,SACZ5J,EAAE6J,OAAOnO,EAAGqE,EAAGrE,EAAI,IAAMC,EAAEuK,QAAQ,IAAK,KACxCrG,EAAEiF,KAAK9E,KAGXnE,EAAOqC,OACe,mBAAX4L,GAAyBA,EAAOC,IACzCD,EAAO,WACL,OAAOjO,IAEkB,YAAL4K,oBAANuD,OAAMvD,YAAAA,EAANuD,UAAuBA,OAAOC,QAC9CD,OAAOC,QAAUpO,EAEjBZ,EAAEY,OAASA,EAx3Bf,CA03BGqO","file":"webcam.min.91c91193.js","sourceRoot":"..","sourcesContent":["// WebcamJS v1.0.25 - http://github.com/jhuckaby/webcamjs - MIT Licensed\n(function (e) {\n  var t;\n  function a() {\n    var e = Error.apply(this, arguments);\n    e.name = this.name = \"FlashError\";\n    this.stack = e.stack;\n    this.message = e.message;\n  }\n  function i() {\n    var e = Error.apply(this, arguments);\n    e.name = this.name = \"WebcamError\";\n    this.stack = e.stack;\n    this.message = e.message;\n  }\n  var s = function () {};\n  s.prototype = Error.prototype;\n  a.prototype = new s();\n  i.prototype = new s();\n  var Webcam = {\n    version: \"1.0.26\",\n    protocol: location.protocol.match(/https/i) ? \"https\" : \"http\",\n    loaded: false,\n    live: false,\n    userMedia: true,\n    iOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !e.MSStream,\n    params: {\n      width: 0,\n      height: 0,\n      dest_width: 0,\n      dest_height: 0,\n      image_format: \"jpeg\",\n      jpeg_quality: 90,\n      enable_flash: true,\n      force_flash: false,\n      flip_horiz: false,\n      fps: 30,\n      upload_name: \"webcam\",\n      constraints: null,\n      swfURL: \"\",\n      flashNotDetectedText:\n        \"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).\",\n      noInterfaceFoundText: \"No supported webcam interface found.\",\n      unfreeze_snap: true,\n      iosPlaceholderText: \"Click here to open camera.\",\n      user_callback: null,\n      user_canvas: null\n    },\n    errors: { FlashError: a, WebcamError: i },\n    hooks: {},\n    init: function () {\n      var t = this;\n      this.mediaDevices =\n        navigator.mediaDevices && navigator.mediaDevices.getUserMedia\n          ? navigator.mediaDevices\n          : navigator.mozGetUserMedia || navigator.webkitGetUserMedia\n          ? {\n              getUserMedia: function (e) {\n                return new Promise(function (t, a) {\n                  (\n                    navigator.mozGetUserMedia || navigator.webkitGetUserMedia\n                  ).call(navigator, e, t, a);\n                });\n              }\n            }\n          : null;\n      e.URL = e.URL || e.webkitURL || e.mozURL || e.msURL;\n      this.userMedia = this.userMedia && !!this.mediaDevices && !!e.URL;\n      if (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\n        if (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\n      }\n      if (this.userMedia) {\n        e.addEventListener(\"beforeunload\", function (e) {\n          t.reset();\n        });\n      }\n    },\n    exifOrientation: function (e) {\n      var t = new DataView(e);\n      if (t.getUint8(0) != 255 || t.getUint8(1) != 216) {\n        console.log(\"Not a valid JPEG file\");\n        return 0;\n      }\n      var a = 2;\n      var i = null;\n      while (a < e.byteLength) {\n        if (t.getUint8(a) != 255) {\n          console.log(\n            \"Not a valid marker at offset \" + a + \", found: \" + t.getUint8(a)\n          );\n          return 0;\n        }\n        i = t.getUint8(a + 1);\n        if (i == 225) {\n          a += 4;\n          var s = \"\";\n          for (n = 0; n < 4; n++) {\n            s += String.fromCharCode(t.getUint8(a + n));\n          }\n          if (s != \"Exif\") {\n            console.log(\"Not valid EXIF data found\");\n            return 0;\n          }\n          a += 6;\n          var r = null;\n          if (t.getUint16(a) == 18761) {\n            r = false;\n          } else if (t.getUint16(a) == 19789) {\n            r = true;\n          } else {\n            console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return 0;\n          }\n          if (t.getUint16(a + 2, !r) != 42) {\n            console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return 0;\n          }\n          var o = t.getUint32(a + 4, !r);\n          if (o < 8) {\n            console.log(\n              \"Not valid TIFF data! (First offset less than 8)\",\n              t.getUint32(a + 4, !r)\n            );\n            return 0;\n          }\n          var l = a + o;\n          var h = t.getUint16(l, !r);\n          for (var c = 0; c < h; c++) {\n            var d = l + c * 12 + 2;\n            if (t.getUint16(d, !r) == 274) {\n              var f = t.getUint16(d + 2, !r);\n              var m = t.getUint32(d + 4, !r);\n              if (f != 3 && m != 1) {\n                console.log(\n                  \"Invalid EXIF orientation value type (\" +\n                    f +\n                    \") or count (\" +\n                    m +\n                    \")\"\n                );\n                return 0;\n              }\n              var p = t.getUint16(d + 8, !r);\n              if (p < 1 || p > 8) {\n                console.log(\"Invalid EXIF orientation value (\" + p + \")\");\n                return 0;\n              }\n              return p;\n            }\n          }\n        } else {\n          a += 2 + t.getUint16(a + 2);\n        }\n      }\n      return 0;\n    },\n    fixOrientation: function (e, t, a) {\n      var i = new Image();\n      i.addEventListener(\n        \"load\",\n        function (e) {\n          var s = document.createElement(\"canvas\");\n          var r = s.getContext(\"2d\");\n          if (t < 5) {\n            s.width = i.width;\n            s.height = i.height;\n          } else {\n            s.width = i.height;\n            s.height = i.width;\n          }\n          switch (t) {\n            case 2:\n              r.transform(-1, 0, 0, 1, i.width, 0);\n              break;\n            case 3:\n              r.transform(-1, 0, 0, -1, i.width, i.height);\n              break;\n            case 4:\n              r.transform(1, 0, 0, -1, 0, i.height);\n              break;\n            case 5:\n              r.transform(0, 1, 1, 0, 0, 0);\n              break;\n            case 6:\n              r.transform(0, 1, -1, 0, i.height, 0);\n              break;\n            case 7:\n              r.transform(0, -1, -1, 0, i.height, i.width);\n              break;\n            case 8:\n              r.transform(0, -1, 1, 0, 0, i.width);\n              break;\n          }\n          r.drawImage(i, 0, 0);\n          a.src = s.toDataURL();\n        },\n        false\n      );\n      i.src = e;\n    },\n    attach: function (a) {\n      if (typeof a == \"string\") {\n        a = document.getElementById(a) || document.querySelector(a);\n      }\n      if (!a) {\n        return this.dispatch(\n          \"error\",\n          new i(\"Could not locate DOM element to attach to.\")\n        );\n      }\n      this.container = a;\n      a.innerHTML = \"\";\n      var s = document.createElement(\"div\");\n      a.appendChild(s);\n      this.peg = s;\n      if (!this.params.width) this.params.width = a.offsetWidth;\n      if (!this.params.height) this.params.height = a.offsetHeight;\n      if (!this.params.width || !this.params.height) {\n        return this.dispatch(\n          \"error\",\n          new i(\n            \"No width and/or height for webcam.  Please call set() first, or attach to a visible element.\"\n          )\n        );\n      }\n      if (!this.params.dest_width) this.params.dest_width = this.params.width;\n      if (!this.params.dest_height)\n        this.params.dest_height = this.params.height;\n      this.userMedia = t === undefined ? this.userMedia : t;\n      if (this.params.force_flash) {\n        t = this.userMedia;\n        this.userMedia = null;\n      }\n      if (typeof this.params.fps !== \"number\") this.params.fps = 30;\n      var r = this.params.width / this.params.dest_width;\n      var o = this.params.height / this.params.dest_height;\n      if (this.userMedia) {\n        var n = document.createElement(\"video\");\n        n.setAttribute(\"autoplay\", \"autoplay\");\n        n.setAttribute(\"playsinline\", \"playsinline\");\n        n.style.width = \"\" + this.params.dest_width + \"px\";\n        n.style.height = \"\" + this.params.dest_height + \"px\";\n        if (r != 1 || o != 1) {\n          a.style.overflow = \"hidden\";\n          n.style.webkitTransformOrigin = \"0px 0px\";\n          n.style.mozTransformOrigin = \"0px 0px\";\n          n.style.msTransformOrigin = \"0px 0px\";\n          n.style.oTransformOrigin = \"0px 0px\";\n          n.style.transformOrigin = \"0px 0px\";\n          n.style.webkitTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.mozTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.msTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.oTransform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n          n.style.transform = \"scaleX(\" + r + \") scaleY(\" + o + \")\";\n        }\n        a.appendChild(n);\n        this.video = n;\n        var l = this;\n        this.mediaDevices\n          .getUserMedia({\n            audio: false,\n            video: this.params.constraints || {\n              mandatory: {\n                minWidth: this.params.dest_width,\n                minHeight: this.params.dest_height\n              }\n            }\n          })\n          .then(function (t) {\n            n.onloadedmetadata = function (e) {\n              l.stream = t;\n              l.loaded = true;\n              l.live = true;\n              l.dispatch(\"load\");\n              l.dispatch(\"live\");\n              l.flip();\n            };\n            if (\"srcObject\" in n) {\n              n.srcObject = t;\n            } else {\n              n.src = e.URL.createObjectURL(t);\n            }\n          })\n          .catch(function (e) {\n            if (l.params.enable_flash && l.detectFlash()) {\n              setTimeout(function () {\n                l.params.force_flash = 1;\n                l.attach(a);\n              }, 1);\n            } else {\n              l.dispatch(\"error\", e);\n            }\n          });\n      } else if (this.iOS) {\n        var h = document.createElement(\"div\");\n        h.id = this.container.id + \"-ios_div\";\n        h.className = \"webcamjs-ios-placeholder\";\n        h.style.width = \"\" + this.params.width + \"px\";\n        h.style.height = \"\" + this.params.height + \"px\";\n        h.style.textAlign = \"center\";\n        h.style.display = \"table-cell\";\n        h.style.verticalAlign = \"middle\";\n        h.style.backgroundRepeat = \"no-repeat\";\n        h.style.backgroundSize = \"contain\";\n        h.style.backgroundPosition = \"center\";\n        var c = document.createElement(\"span\");\n        c.className = \"webcamjs-ios-text\";\n        c.innerHTML = this.params.iosPlaceholderText;\n        h.appendChild(c);\n        var d = document.createElement(\"img\");\n        d.id = this.container.id + \"-ios_img\";\n        d.style.width = \"\" + this.params.dest_width + \"px\";\n        d.style.height = \"\" + this.params.dest_height + \"px\";\n        d.style.display = \"none\";\n        h.appendChild(d);\n        var f = document.createElement(\"input\");\n        f.id = this.container.id + \"-ios_input\";\n        f.setAttribute(\"type\", \"file\");\n        f.setAttribute(\"accept\", \"image/*\");\n        f.setAttribute(\"capture\", \"camera\");\n        var l = this;\n        var m = this.params;\n        f.addEventListener(\n          \"change\",\n          function (e) {\n            if (\n              e.target.files.length > 0 &&\n              e.target.files[0].type.indexOf(\"image/\") == 0\n            ) {\n              var t = URL.createObjectURL(e.target.files[0]);\n              var a = new Image();\n              a.addEventListener(\n                \"load\",\n                function (e) {\n                  var t = document.createElement(\"canvas\");\n                  t.width = m.dest_width;\n                  t.height = m.dest_height;\n                  var i = t.getContext(\"2d\");\n                  ratio = Math.min(\n                    a.width / m.dest_width,\n                    a.height / m.dest_height\n                  );\n                  var s = m.dest_width * ratio;\n                  var r = m.dest_height * ratio;\n                  var o = (a.width - s) / 2;\n                  var n = (a.height - r) / 2;\n                  i.drawImage(a, o, n, s, r, 0, 0, m.dest_width, m.dest_height);\n                  var l = t.toDataURL();\n                  d.src = l;\n                  h.style.backgroundImage = \"url('\" + l + \"')\";\n                },\n                false\n              );\n              var i = new FileReader();\n              i.addEventListener(\n                \"load\",\n                function (e) {\n                  var i = l.exifOrientation(e.target.result);\n                  if (i > 1) {\n                    l.fixOrientation(t, i, a);\n                  } else {\n                    a.src = t;\n                  }\n                },\n                false\n              );\n              var s = new XMLHttpRequest();\n              s.open(\"GET\", t, true);\n              s.responseType = \"blob\";\n              s.onload = function (e) {\n                if (this.status == 200 || this.status === 0) {\n                  i.readAsArrayBuffer(this.response);\n                }\n              };\n              s.send();\n            }\n          },\n          false\n        );\n        f.style.display = \"none\";\n        a.appendChild(f);\n        h.addEventListener(\n          \"click\",\n          function (e) {\n            if (m.user_callback) {\n              l.snap(m.user_callback, m.user_canvas);\n            } else {\n              f.style.display = \"block\";\n              f.focus();\n              f.click();\n              f.style.display = \"none\";\n            }\n          },\n          false\n        );\n        a.appendChild(h);\n        this.loaded = true;\n        this.live = true;\n      } else if (this.params.enable_flash && this.detectFlash()) {\n        e.Webcam = Webcam;\n        var h = document.createElement(\"div\");\n        h.innerHTML = this.getSWFHTML();\n        a.appendChild(h);\n      } else {\n        this.dispatch(\"error\", new i(this.params.noInterfaceFoundText));\n      }\n      if (this.params.crop_width && this.params.crop_height) {\n        var p = Math.floor(this.params.crop_width * r);\n        var u = Math.floor(this.params.crop_height * o);\n        a.style.width = \"\" + p + \"px\";\n        a.style.height = \"\" + u + \"px\";\n        a.style.overflow = \"hidden\";\n        a.scrollLeft = Math.floor(this.params.width / 2 - p / 2);\n        a.scrollTop = Math.floor(this.params.height / 2 - u / 2);\n      } else {\n        a.style.width = \"\" + this.params.width + \"px\";\n        a.style.height = \"\" + this.params.height + \"px\";\n      }\n    },\n    reset: function () {\n      if (this.preview_active) this.unfreeze();\n      this.unflip();\n      if (this.userMedia) {\n        if (this.stream) {\n          if (this.stream.getVideoTracks) {\n            var e = this.stream.getVideoTracks();\n            if (e && e[0] && e[0].stop) e[0].stop();\n          } else if (this.stream.stop) {\n            this.stream.stop();\n          }\n        }\n        delete this.stream;\n        delete this.video;\n      }\n      if (this.userMedia !== true && this.loaded && !this.iOS) {\n        var t = this.getMovie();\n        if (t && t._releaseCamera) t._releaseCamera();\n      }\n      if (this.container) {\n        this.container.innerHTML = \"\";\n        delete this.container;\n      }\n      this.loaded = false;\n      this.live = false;\n    },\n    set: function () {\n      if (arguments.length == 1) {\n        for (var e in arguments[0]) {\n          this.params[e] = arguments[0][e];\n        }\n      } else {\n        this.params[arguments[0]] = arguments[1];\n      }\n    },\n    on: function (e, t) {\n      e = e.replace(/^on/i, \"\").toLowerCase();\n      if (!this.hooks[e]) this.hooks[e] = [];\n      this.hooks[e].push(t);\n    },\n    off: function (e, t) {\n      e = e.replace(/^on/i, \"\").toLowerCase();\n      if (this.hooks[e]) {\n        if (t) {\n          var a = this.hooks[e].indexOf(t);\n          if (a > -1) this.hooks[e].splice(a, 1);\n        } else {\n          this.hooks[e] = [];\n        }\n      }\n    },\n    dispatch: function () {\n      var t = arguments[0].replace(/^on/i, \"\").toLowerCase();\n      var s = Array.prototype.slice.call(arguments, 1);\n      if (this.hooks[t] && this.hooks[t].length) {\n        for (var r = 0, o = this.hooks[t].length; r < o; r++) {\n          var n = this.hooks[t][r];\n          if (typeof n == \"function\") {\n            n.apply(this, s);\n          } else if (typeof n == \"object\" && n.length == 2) {\n            n[0][n[1]].apply(n[0], s);\n          } else if (e[n]) {\n            e[n].apply(e, s);\n          }\n        }\n        return true;\n      } else if (t == \"error\") {\n        var l;\n        if (s[0] instanceof a || s[0] instanceof i) {\n          l = s[0].message;\n        } else {\n          l =\n            \"Could not access webcam: \" +\n            s[0].name +\n            \": \" +\n            s[0].message +\n            \" \" +\n            s[0].toString();\n        }\n        alert(\"Webcam.js Error: \" + l);\n      }\n      return false;\n    },\n    setSWFLocation: function (e) {\n      this.set(\"swfURL\", e);\n    },\n    detectFlash: function () {\n      var t = \"Shockwave Flash\",\n        a = \"ShockwaveFlash.ShockwaveFlash\",\n        i = \"application/x-shockwave-flash\",\n        s = e,\n        r = navigator,\n        o = false;\n      if (\n        typeof r.plugins !== \"undefined\" &&\n        typeof r.plugins[t] === \"object\"\n      ) {\n        var n = r.plugins[t].description;\n        if (\n          n &&\n          typeof r.mimeTypes !== \"undefined\" &&\n          r.mimeTypes[i] &&\n          r.mimeTypes[i].enabledPlugin\n        ) {\n          o = true;\n        }\n      } else if (typeof s.ActiveXObject !== \"undefined\") {\n        try {\n          var l = new ActiveXObject(a);\n          if (l) {\n            var h = l.GetVariable(\"$version\");\n            if (h) o = true;\n          }\n        } catch (e) {}\n      }\n      return o;\n    },\n    getSWFHTML: function () {\n      var t = \"\",\n        i = this.params.swfURL;\n      if (location.protocol.match(/file/)) {\n        this.dispatch(\n          \"error\",\n          new a(\n            \"Flash does not work from local disk.  Please run from a web server.\"\n          )\n        );\n        return '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\n      }\n      if (!this.detectFlash()) {\n        this.dispatch(\n          \"error\",\n          new a(\n            \"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\"\n          )\n        );\n        return (\n          '<h3 style=\"color:red\">' + this.params.flashNotDetectedText + \"</h3>\"\n        );\n      }\n      if (!i) {\n        var s = \"\";\n        var r = document.getElementsByTagName(\"script\");\n        for (var o = 0, n = r.length; o < n; o++) {\n          var l = r[o].getAttribute(\"src\");\n          if (l && l.match(/\\/webcam(\\.min)?\\.js/)) {\n            s = l.replace(/\\/webcam(\\.min)?\\.js.*$/, \"\");\n            o = n;\n          }\n        }\n        if (s) i = s + \"/webcam.swf\";\n        else i = \"webcam.swf\";\n      }\n      if (e.localStorage && !localStorage.getItem(\"visited\")) {\n        this.params.new_user = 1;\n        localStorage.setItem(\"visited\", 1);\n      }\n      var h = \"\";\n      for (var c in this.params) {\n        if (h) h += \"&\";\n        h += c + \"=\" + escape(this.params[c]);\n      }\n      t +=\n        '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"' +\n        this.protocol +\n        '://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"' +\n        this.params.width +\n        '\" height=\"' +\n        this.params.height +\n        '\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"' +\n        i +\n        '\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"' +\n        h +\n        '\"/><embed id=\"webcam_movie_embed\" src=\"' +\n        i +\n        '\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"' +\n        this.params.width +\n        '\" height=\"' +\n        this.params.height +\n        '\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"' +\n        h +\n        '\"></embed></object>';\n      return t;\n    },\n    getMovie: function () {\n      if (!this.loaded)\n        return this.dispatch(\"error\", new a(\"Flash Movie is not loaded yet\"));\n      var e = document.getElementById(\"webcam_movie_obj\");\n      if (!e || !e._snap) e = document.getElementById(\"webcam_movie_embed\");\n      if (!e) this.dispatch(\"error\", new a(\"Cannot locate Flash movie in DOM\"));\n      return e;\n    },\n    freeze: function () {\n      var e = this;\n      var t = this.params;\n      if (this.preview_active) this.unfreeze();\n      var a = this.params.width / this.params.dest_width;\n      var i = this.params.height / this.params.dest_height;\n      this.unflip();\n      var s = t.crop_width || t.dest_width;\n      var r = t.crop_height || t.dest_height;\n      var o = document.createElement(\"canvas\");\n      o.width = s;\n      o.height = r;\n      var n = o.getContext(\"2d\");\n      this.preview_canvas = o;\n      this.preview_context = n;\n      if (a != 1 || i != 1) {\n        o.style.webkitTransformOrigin = \"0px 0px\";\n        o.style.mozTransformOrigin = \"0px 0px\";\n        o.style.msTransformOrigin = \"0px 0px\";\n        o.style.oTransformOrigin = \"0px 0px\";\n        o.style.transformOrigin = \"0px 0px\";\n        o.style.webkitTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.mozTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.msTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.oTransform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n        o.style.transform = \"scaleX(\" + a + \") scaleY(\" + i + \")\";\n      }\n      this.snap(function () {\n        o.style.position = \"relative\";\n        o.style.left = \"\" + e.container.scrollLeft + \"px\";\n        o.style.top = \"\" + e.container.scrollTop + \"px\";\n        e.container.insertBefore(o, e.peg);\n        e.container.style.overflow = \"hidden\";\n        e.preview_active = true;\n      }, o);\n    },\n    unfreeze: function () {\n      if (this.preview_active) {\n        this.container.removeChild(this.preview_canvas);\n        delete this.preview_context;\n        delete this.preview_canvas;\n        this.preview_active = false;\n        this.flip();\n      }\n    },\n    flip: function () {\n      if (this.params.flip_horiz) {\n        var e = this.container.style;\n        e.webkitTransform = \"scaleX(-1)\";\n        e.mozTransform = \"scaleX(-1)\";\n        e.msTransform = \"scaleX(-1)\";\n        e.oTransform = \"scaleX(-1)\";\n        e.transform = \"scaleX(-1)\";\n        e.filter = \"FlipH\";\n        e.msFilter = \"FlipH\";\n      }\n    },\n    unflip: function () {\n      if (this.params.flip_horiz) {\n        var e = this.container.style;\n        e.webkitTransform = \"scaleX(1)\";\n        e.mozTransform = \"scaleX(1)\";\n        e.msTransform = \"scaleX(1)\";\n        e.oTransform = \"scaleX(1)\";\n        e.transform = \"scaleX(1)\";\n        e.filter = \"\";\n        e.msFilter = \"\";\n      }\n    },\n    savePreview: function (e, t) {\n      var a = this.params;\n      var i = this.preview_canvas;\n      var s = this.preview_context;\n      if (t) {\n        var r = t.getContext(\"2d\");\n        r.drawImage(i, 0, 0);\n      }\n      e(\n        t ? null : i.toDataURL(\"image/\" + a.image_format, a.jpeg_quality / 100),\n        i,\n        s\n      );\n      if (this.params.unfreeze_snap) this.unfreeze();\n    },\n    snap: function (e, t) {\n      if (!e) e = this.params.user_callback;\n      if (!t) t = this.params.user_canvas;\n      var a = this;\n      var s = this.params;\n      if (!this.loaded)\n        return this.dispatch(\"error\", new i(\"Webcam is not loaded yet\"));\n      if (!e)\n        return this.dispatch(\n          \"error\",\n          new i(\"Please provide a callback function or canvas to snap()\")\n        );\n      if (this.preview_active) {\n        this.savePreview(e, t);\n        return null;\n      }\n      var r = document.createElement(\"canvas\");\n      r.width = this.params.dest_width;\n      r.height = this.params.dest_height;\n      var o = r.getContext(\"2d\");\n      if (this.params.flip_horiz) {\n        o.translate(s.dest_width, 0);\n        o.scale(-1, 1);\n      }\n      var n = function () {\n        /* \n        if (this.src && this.width && this.height) {\n          o.drawImage(this, 0, 0, s.dest_width, s.dest_height);\n        } \n        */\n\n        if (s.crop_width && s.crop_height) {\n          var a = document.createElement(\"canvas\");\n          a.width = s.crop_width;\n          a.height = s.crop_height;\n          var i = a.getContext(\"2d\");\n          i.drawImage(\n            r,\n            Math.floor(s.dest_width / 2 - s.crop_width / 2),\n            Math.floor(s.dest_height / 2 - s.crop_height / 2),\n            s.crop_width,\n            s.crop_height,\n            0,\n            0,\n            s.crop_width,\n            s.crop_height\n          );\n          o = i;\n          r = a;\n        }\n        if (t) {\n          var n = t.getContext(\"2d\");\n          n.drawImage(r, 0, 0);\n        }\n        e(\n          t\n            ? null\n            : r.toDataURL(\"image/\" + s.image_format, s.jpeg_quality / 100),\n          r,\n          o\n        );\n      };\n      if (this.userMedia) {\n        o.drawImage(\n          this.video,\n          0,\n          0,\n          this.params.dest_width,\n          this.params.dest_height\n        );\n        n();\n      } else if (this.iOS) {\n        var l = document.getElementById(this.container.id + \"-ios_div\");\n        var h = document.getElementById(this.container.id + \"-ios_img\");\n        var c = document.getElementById(this.container.id + \"-ios_input\");\n        iFunc = function (e) {\n          n.call(h);\n          h.removeEventListener(\"load\", iFunc);\n          l.style.backgroundImage = \"none\";\n          h.removeAttribute(\"src\");\n          c.value = null;\n        };\n        if (!c.value) {\n          h.addEventListener(\"load\", iFunc);\n          c.style.display = \"block\";\n          c.focus();\n          c.click();\n          c.style.display = \"none\";\n        } else {\n          iFunc(null);\n        }\n      } else {\n        var d = this.getMovie()._snap();\n        var h = new Image();\n        h.onload = n;\n        h.src = \"data:image/\" + this.params.image_format + \";base64,\" + d;\n      }\n      return null;\n    },\n    configure: function (e) {\n      if (!e) e = \"camera\";\n      this.getMovie()._configure(e);\n    },\n    flashNotify: function (e, t) {\n      switch (e) {\n        case \"flashLoadComplete\":\n          this.loaded = true;\n          this.dispatch(\"load\");\n          break;\n        case \"cameraLive\":\n          this.live = true;\n          this.dispatch(\"live\");\n          break;\n        case \"error\":\n          this.dispatch(\"error\", new a(t));\n          break;\n        default:\n          break;\n      }\n    },\n    b64ToUint6: function (e) {\n      return e > 64 && e < 91\n        ? e - 65\n        : e > 96 && e < 123\n        ? e - 71\n        : e > 47 && e < 58\n        ? e + 4\n        : e === 43\n        ? 62\n        : e === 47\n        ? 63\n        : 0;\n    },\n    base64DecToArr: function (e, t) {\n      var a = e.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"),\n        i = a.length,\n        s = t ? Math.ceil(((i * 3 + 1) >> 2) / t) * t : (i * 3 + 1) >> 2,\n        r = new Uint8Array(s);\n      for (var o, n, l = 0, h = 0, c = 0; c < i; c++) {\n        n = c & 3;\n        l |= this.b64ToUint6(a.charCodeAt(c)) << (18 - 6 * n);\n        if (n === 3 || i - c === 1) {\n          for (o = 0; o < 3 && h < s; o++, h++) {\n            r[h] = (l >>> ((16 >>> o) & 24)) & 255;\n          }\n          l = 0;\n        }\n      }\n      return r;\n    },\n    upload: function (e, t, a) {\n      var i = this.params.upload_name || \"webcam\";\n      var s = \"\";\n      if (e.match(/^data\\:image\\/(\\w+)/)) s = RegExp.$1;\n      else throw \"Cannot locate image format in Data URI\";\n      var r = e.replace(/^data\\:image\\/\\w+\\;base64\\,/, \"\");\n      var o = new XMLHttpRequest();\n      o.open(\"POST\", t, true);\n      if (o.upload && o.upload.addEventListener) {\n        o.upload.addEventListener(\n          \"progress\",\n          function (e) {\n            if (e.lengthComputable) {\n              var t = e.loaded / e.total;\n              Webcam.dispatch(\"uploadProgress\", t, e);\n            }\n          },\n          false\n        );\n      }\n      var n = this;\n      o.onload = function () {\n        if (a) a.apply(n, [o.status, o.responseText, o.statusText]);\n        Webcam.dispatch(\n          \"uploadComplete\",\n          o.status,\n          o.responseText,\n          o.statusText\n        );\n      };\n      var l = new Blob([this.base64DecToArr(r)], { type: \"image/\" + s });\n      var h = new FormData();\n      h.append(i, l, i + \".\" + s.replace(/e/, \"\"));\n      o.send(h);\n    }\n  };\n  Webcam.init();\n  if (typeof define === \"function\" && define.amd) {\n    define(function () {\n      return Webcam;\n    });\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = Webcam;\n  } else {\n    e.Webcam = Webcam;\n  }\n})(window);\n"]}